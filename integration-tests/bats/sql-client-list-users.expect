#!/usr/bin/expect

# start client
set timeout 2
spawn dolt sql-client --host=0.0.0.0 --port=$PORT
set client $spawn_id

# list all users
expect {
    "mysql> " { send "select user from mysql.user;\r"; }
    timeout { exit 1; }
    failed { exit 1; }
}

# quit
expect {
    "mysql> " { send "quit\r" }
    timeout { exit 1; }
    failed { exit 1; }
}